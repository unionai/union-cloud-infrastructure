{
    "Statement": [
        {
            "Action": [
                "logs:DescribeLogGroups",
                "logs:DescribeDBSubnetGroups",
                "logs:DescribeLogStreams"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:opta-*",
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group::log-stream*",
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/eks/opta-*:*"
            ],
            "Sid": "AllowDescribeLogGroups"
        },
        {
            "Action": [
                "logs:ListTagsLogGroup"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:opta-*",
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group::log-stream*",
                "!Sub arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/eks/opta-*:*"
            ],
            "Sid": "AllowListTagsLogGroup"
        },
        {
            "Action": [
                "s3:GetBucketLogging",
                "s3:GetAccelerateConfiguration",
                "s3:GetBucketAcl",
                "s3:GetBucketCORS"
            ],
            "Effect": "Allow",
            "Resource": [
                "arn:aws:s3:::opta-*"
            ],
            "Sid": "AllowGetBucketLogging"
        },
        {
            "Action": [
                "autoscaling:DescribeAutoScalingGroups",
                "autoscaling:DescribeScalingActivities",
                "autoscaling:DescribeTags"
            ],
            "Effect": "Allow",
            "Resource": [
                "*"
            ],
            "Sid": "AllowDescribeAutoScalingGroups"
        },
        {
            "Action": [
                "eks:DescribeCluster",
                "eks:DescribeNodegroup",
                "eks:DescribeUpdate"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:cluster/opta-*!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:nodegroup/opta-*/opta-*/*",
                "!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:nodegroup/opta-*/opta-*/*"
            ],
            "Sid": "AllowDescribeCluster"
        },
        {
            "Action": [
                "eks:ListTagsForResource",
                "eks:ListNodegroups",
                "eks:ListTagsForResource"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:cluster/opta-*!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:nodegroup/opta-*/opta-*/*",
                "!Sub arn:aws:eks:${AWS::Region}:${AWS::AccountId}:nodegroup/opta-*/opta-*/*"
            ],
            "Sid": "AllowListTagsForEKS"
        },
        {
            "Action": [
                "kms:GetKeyPolicy",
                "kms:GetKeyRotationStatus",
                "kms:DescribeKey"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:kms:${AWS::Region}:${AWS::AccountId}:alias/*",
                "!Sub arn:aws:kms:${AWS::Region}:${AWS::AccountId}:key/*"
            ],
            "Sid": "AllowGetKeyPolicy"
        },
        {
            "Action": [
                "kms:ListResourceTags",
                "kms:ListAliases"
            ],
            "Effect": "Allow",
            "Resource": [
                "*"
            ],
            "Sid": "AllowListResourceTags"
        },
        {
            "Action": [
                "iam:GetOpenIDConnectProvider",
                "iam:GetPolicyVersion",
                "iam:GetPolicy",
                "iam:GetRole",
                "iam:GetRolePolicy",
                "iam:GetInstanceProfile"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:iam::${AWS::AccountId}:oidc-provider/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:policy/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:role/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:instance-profile/*"
            ],
            "Sid": "AllowGetIAM"
        },
        {
            "Action": [
                "iam:ListOpenIDConnectProviderTags",
                "iam:ListPolicyVersions",
                "iam:ListPolicyTags",
                "iam:ListRoleTags",
                "iam:ListInstanceProfilesForRole",
                "iam:ListInstanceProfileTags",
                "iam:ListRoles",
                "iam:ListRolePolicies",
                "iam:ListAttachedRolePolicies"
            ],
            "Effect": "Allow",
            "Resource": [
                "!Sub arn:aws:iam::${AWS::AccountId}:oidc-provider/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:policy/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:role/*",
                "!Sub arn:aws:iam::${AWS::AccountId}:instance-profile/*"
            ],
            "Sid": "AllowListIAM"
        },
        {
            "Action": [
                "ec2:DescribeAccountAttributes",
                "ec2:DescribeAddresses",
                "ec2:DescribeAvailabilityZones",
                "ec2:DescribeFlowLogs",
                "ec2:DescribeInstanceTypeOfferings",
                "ec2:DescribeInternetGateways",
                "ec2:DescribeNatGateways",
                "ec2:DescribeNetworkAcls",
                "ec2:AssociateAddress",
                "ec2:DisassociateAddress",
                "ec2:DescribeNetworkInterfaces",
                "ec2:DescribePrefixLists",
                "ec2:DescribeRouteTables",
                "ec2:DescribeSecurityGroupRules",
                "ec2:DescribeSecurityGroups",
                "ec2:DescribeSubnets",
                "ec2:DescribeVpcAttribute",
                "ec2:DescribeVpcClassicLink",
                "ec2:DescribeVpcClassicLinkDnsSupport",
                "ec2:DescribeVpcEndpoints",
                "ec2:DescribeVpcs",
                "ec2:DescribeImages",
                "ec2:DescribeLaunchTemplates",
                "ec2:DescribeLaunchTemplateVersions",
                "ec2:GetEbsEncryptionByDefault"
            ],
            "Effect": "Allow",
            "Resource": [
                "*"
            ],
            "Sid": "AllowDescribeAccountAttributes"
        }
    ],
    "Version": "2012-10-17"
}